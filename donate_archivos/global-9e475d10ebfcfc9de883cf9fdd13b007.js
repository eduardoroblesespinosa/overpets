/** 
 * Automatically Generated - DO NOT EDIT 
 * KPS3 / v1.0.0 / 2019-09-27 
 */ 

!function(a){"use strict";function b(){this.$menu=a(".mp-menu"),this.$levels=this.$menu.find(".mp-level"),this.$levels.eq(0).addClass("mp-level-open"),this.open=!1,this.init()}function c(a){var b=a.toString().split(".");return b.length>1?b[1].length:0}function d(){a(".headerBarStats-figure").each(function(){var b=a(this),d=b.text(),e=0,f=2,g={"useEasing":!0,"prefix":""};if(d.length>0&&("$"===d[0]&&(g.prefix="$"),d=d.replace(/[^\d.-]/g,""),d=parseFloat(d),!isNaN(d))){var h=c(d),i=new CountUp(b.get(0),e,d,h,f,g);i.error?console.error(i.error):i.start()}})}b.prototype={"init":function(){var b=this;this.$levels.each(function(){b._labelLevels(a(this))}),this._bindEvents(),this._setCurrentPage()},"_bindEvents":function(){var a=this;this.$menu.find(".mp-has-children").on("click",function(b){a._clickHandler(this,b),a._bindOverlayEvent()}),this.$menu.find(".mp-back").on("click",function(b){a._backBtnHandler(this,b)})},"_bindOverlayEvent":function(){a(".mp-level-overlay").off("click.mpOverlay").on("click.mpOverlay",this._closeMenuHandler)},"_backBtnHandler":function(b,c){c.preventDefault();var d=a(b);d.closest(".mp-level-overlay").off("click.mpOverlay"),d.closest(".mp-level").removeClass("mp-level-open"),d.closest(".mp-level-overlay").removeClass("mp-level-overlay")},"_clickHandler":function(b,c){c.preventDefault(),c.stopImmediatePropagation();var d=a(b).parent(),e=d.find("> .mp-level").addClass("mp-level-open");d.closest(".mp-level").addClass("mp-level-overlay"),e.on("click.mpOverlay",function(a){a.stopImmediatePropagation()})},"_closeMenuHandler":function(b){b.preventDefault(),b.stopImmediatePropagation();var c=a(this).off("click.mpOverlay");c.find(".mp-level-open").removeClass("mp-level-open"),c.removeClass("mp-level-overlay").find(".mp-level-overlay").removeClass("mp-level-overlay")},"toggle":function(){this.open?this._closeMenu():this._openMenu()},"reset":function(){this.$levels.removeClass("mp-level-open mp-level-overlay")},"_setCurrentPage":function(){var a=this.$levels.find(".mp-current"),b=a.parents(".mp-level");b.addClass("mp-level-open mp-level-overlay"),a.closest(".mp-level").removeClass("mp-level-overlay")},"_openMenu":function(){this.$menu.addClass("on").attr("aria-hidden",!1),this.open=!0},"_closeMenu":function(){this.$menu.removeClass("on").attr("aria-hidden",!0),this.open=!1},"_getLevelDepth":function(a){return a.parents(".mp-level").length},"_setLevelParent":function(a){a.parent().find("> a").addClass("mp-has-children")},"_labelLevels":function(a){a.attr("data-level",this._getLevelDepth(a)),this._setLevelParent(a)}};var e=new b;a("#mobileNavBtn").on("click",function(b){e.toggle(),a(".main-wrapper").toggleClass("on")});var f=function(b){var c=a(".js-newsletter-subscribe"),d=function(){return c.length?(e(),this):void 0},e=function(){a(c).on("submit",f)},f=function(b){b.preventDefault(),a(c).addClass("form-processing"),a(c).removeClass("form-success"),a(c).removeClass("form-error"),a(c).find("button").prop("disabled",!0);var d=a(this).attr("action"),e=a(this).find('input[name="action"]').val(),f=a(this).find('input[name="email"]').val(),i=a(this).find('input[name="list"]').val();a.post(d,{"action":e,"email":f,"list":i}).done(function(a){a.success?g():h(a.message)}).fail(function(){h("An unknown error occurred")})},g=function(){a(c).removeClass("form-processing"),a(c).addClass("form-success")},h=function(b){a(c).find("button").prop("disabled",!1),a(c).removeClass("form-processing"),a(c).addClass("form-error")};return{"init":function(){new d}}}(window),g=function(b){var c=document.getElementById("location-search"),d=document.getElementById("location-input"),e=document.getElementById("coordinates-input"),f=function(){return c?(g(),this):void 0},g=function(){i.init(),j.init(),a(c).on("submit",h)},h=function(a){a.preventDefault();var b=c.getAttribute("action"),f=d.value,g=e.value,h="#";g&&(h+="coordinates="+encodeURIComponent(g)),f&&(h+="&location="+encodeURIComponent(f)),document.location.href=b+h},i=function(b){var c,f=a("#location-input"),g=a("#coordinates-input"),h=a("#location-submit"),i=a("#location-clear"),j=function(){return d?(p(),k(),l(),this):void 0},k=function(){f.on("keypress",function(a){13===a.which&&h.trigger("click")}),c=new google.maps.places.Autocomplete(f[0],{"types":["(cities)"],"componentRestrictions":{"country":"us"}}),c.addListener("place_changed",m)},l=function(){i.on("click",function(){g.val(""),f.val(""),p(),r()})},m=function(){n(function(){o(),q(),h.trigger("click")})},n=function(b){var d=c.getPlace();if(d.geometry){var f=d.geometry.location.lat(),g=d.geometry.location.lng();a(e).val(f+","+g),b()}else if(d.name){var h=d.name;"St Paul, MN, United States"==h&&(h="St. Paul, MN, United States");var i=new google.maps.Geocoder;i.geocode({"address":h},function(c,d){if(d==google.maps.GeocoderStatus.OK){var f=c[0].geometry.location.lat(),g=c[0].geometry.location.lng();a(e).val(f+","+g),b()}})}},o=function(){h.removeAttr("disabled")},p=function(){h.attr("disabled","disabled")},q=function(){i.show()},r=function(){i.hide()};return{"init":function(){new j}}}(b),j=function(b){var d=document.getElementById("location-detect"),e=document.getElementById("coordinates-input"),f=document.getElementById("location-input"),g=function(){return d&&"geolocation"in navigator?(h(),this):void 0},h=function(){d.style.display="block",d.addEventListener("click",function(a){a.preventDefault(),navigator.geolocation.getCurrentPosition(i,j)},!1)},i=function(b){var d=b.coords.latitude,g=b.coords.longitude;a(e).val(d+","+g),a(f).val(""),a(c).trigger("submit")},j=function(b){a(d).hide(),k(1==b.code?"It appears that you have denied location detection.  Please enter your location above.":"An error occurred when detecting your location.  Please enter your location above.")},k=function(b){var c=a("<p>").text(b);c.insertAfter(a(d))};return{"init":function(){new g}}}(b);return{"init":function(){new f}}}(window);a(document).ready(function(){g.init(),f.init(),a("input.icheck").each(function(){var b=a(this),c=b.next(),d=c.text(),e=b.data("class");c.remove(),b.iCheck({"checkboxClass":e,"insert":""+d})}),a(".js-select").select2({"minimumResultsForSearch":1/0}),a(".js-select-state").select2({"minimumResultsForSearch":1/0})}),a(".flexslider").flexslider({"animation":"slide","pauseOnAction":!0,"directionNav":!0}),a(".dotdotdot").dotdotdot({"watch":!0}),a(".content").fitVids();var h=a("#donationModal"),i=a("#donation-Open"),j=a(".donationModal-close"),k=a(".js-updateDonation"),l=a(".js-useCurrentDonation"),m=a(".donationSuccessSubmit");i.on("click",function(){var b=a(".donation-form");if(b[0].checkValidity()){var c=parseFloat(a("#js-amount").val()),d=.029*c+.3,e=a(".totalDonationAmount"),f=a(".processingFee");f.text(d.toFixed(2)),e.text((d+c).toFixed(2)),h.show()}else b[0].reportValidity()}),j.on("click",function(){h.hide()}),k.on("click",function(){var b=a(".totalDonationAmount"),c=a("#donation-Open");a("#js-amount").val(b.text()),c.prop("disabled",!0),a(".donation-form").submit()}),l.on("click",function(){var b=a("#donation-Open");b.prop("disabled",!0),a(".donation-form").submit()}),m.on("click",function(){var b=a("#donation-Open");b.prop("disabled",!1)});var n=a(".headerBarStats");if(n.length)var o=new Waypoint({"element":n,"handler":function(a){d(),o.destroy()},"offset":"80%"});var p=a(".js-animated-quote").addClass("is-initial-state"),q=a(".js-animated-title").addClass("is-initial-state");p.length&&q.length&&p.each(function(b,c){new Waypoint({"element":a(c),"handler":function(d){a(c).removeClass("is-initial-state"),q.eq(b).removeClass("is-initial-state")},"offset":"70%"})}),a(".validation_message").length>0&&a(".validation_message").text().trim().length>0&&a("html, body").scrollTop(a(".validation_message").eq(0).closest("li").offset().top-150)}(jQuery);